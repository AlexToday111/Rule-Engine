# Компоненты

## REST слой

- `DecisionController` — принимает запросы на вычисление решения.
- `RulesController` — CRUD для правил + ручная очистка кэша.

## Сервисный слой

- `DecisionService` — основной исполнитель: получает правила, создает контекст, применяет условия и эффекты, формирует трассировку.
- `DecisionContext` — контейнер входных атрибутов и вспомогательных методов доступа.

## Доступ к данным

- `RuleRepository` — JPA репозиторий для чтения/записи правил.
- `Rule` — JPA сущность и отображение на таблицу `rules`.

## Кэш

- `RuleCache` — кэширует список правил по `decisionType` с TTL 30 секунд.
- При попадании/промахе кэша записываются метрики.

## DTO и маппинг

- `DecisionRequest/DecisionResponse` — вход/выход evaluate.
- `RuleCreateRequest/RuleUpdateRequest/RuleResponse` — API для правил.
- `RuleMapper` — преобразования между DTO и сущностью.

## Ошибки

- `GlobalExceptionHandler` — единообразные ответы для ошибок валидации и бизнес-логики.
