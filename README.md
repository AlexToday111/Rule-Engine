# Rule Engine / Decision Engine

Rule Engine — это backend-сервис на Spring Boot для принятия решений на основе набора правил,
которые хранятся в базе данных и применяются к входному контексту во время выполнения.

Проект реализует **универсальный decision engine**, который может использоваться для:
- eligibility-проверок
- антифрода
- скоринга
- feature-gating
- бизнес-валидаций

---

## Основная идея

Сервис принимает **контекст** (набор атрибутов) и прогоняет его через **цепочку правил**,
отсортированных по приоритету.

Каждое правило:
- проверяет условие (`condition`)
- при совпадении применяет эффект (`effect`)
- может остановить выполнение цепочки (например, при `DENY`)

В ответе возвращается:
- итоговое решение
- трассировка сработавших правил
- время выполнения

---

## Архитектура

Проект реализован как **монолит** с чётким разделением ответственности
(стиль *модульного монолита*).



### Ключевые принципы
- Entity ≠ DTO ≠ Service
- Правила — это **данные**, а не Java-код
- Логика исполнения отделена от хранения
- Минимум DTO (только request / response)

---

## API

### `POST /decisions/evaluate`

#### Request
```json
{
  "decisionType": "CREDIT_ELIGIBILITY",
  "subjectId": "user-123",
  "attributes": {
    "age": 17,
    "country": "DE",
    "balance": 1200
  }
}
```

```json
{
  "decision": "DENY",
  "score": null,
  "executionTimeMs": 12,
  "triggeredRules": [
    {
      "ruleId": "1",
      "ruleName": "MIN_AGE",
      "matched": true,
      "reason": "UNDERAGE"
    }
  ]
}
```


